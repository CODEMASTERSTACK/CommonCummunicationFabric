# Visual Guide - Media Preview Implementation

## Chat Screen Layout with Media

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Room Code: 123456                    Settings  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  Today                                          â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Friend's Phone          â”‚                   â”‚
â”‚  â”‚                         â”‚                   â”‚
â”‚  â”‚  Hi, check this image!  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  14:32                          ğŸ“Œ              â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Friend's Phone                   â”‚          â”‚
â”‚  â”‚                                  â”‚          â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚          â”‚
â”‚  â”‚ â”‚                            â”‚   â”‚          â”‚
â”‚  â”‚ â”‚     [IMAGE PREVIEW]        â”‚   â”‚          â”‚
â”‚  â”‚ â”‚     (tap for fullscreen)   â”‚   â”‚          â”‚
â”‚  â”‚ â”‚                            â”‚   â”‚          â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚          â”‚
â”‚  â”‚ sunset.jpg â€¢ 2.5 MB              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  14:35                          ğŸ“Œ              â”‚
â”‚                                                 â”‚
â”‚         Here's my pet doing tricks:            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚                                    â”‚        â”‚
â”‚  â”‚  â–¶ [VIDEO PLAYER]   00:45         â”‚        â”‚
â”‚  â”‚     (tap to play/pause)            â”‚        â”‚
â”‚  â”‚                                    â”‚        â”‚
â”‚  â”‚  pet_video.mp4 â€¢ 12.3 MB           â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  14:37                              ğŸ“Œ         â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚                                  â”‚          â”‚
â”‚  â”‚ ğŸ”µ â–¶  â”â”â”â”â”â”â”â”â”â•â”â”â” 3:42       â”‚          â”‚
â”‚  â”‚      0:00              3:42       â”‚          â”‚
â”‚  â”‚                                  â”‚          â”‚
â”‚  â”‚ ğŸµ song.mp3 â€¢ 8.5 MB             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  14:40                          ğŸ“Œ              â”‚
â”‚                                                 â”‚
â”‚                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [+] â”‚ Type a message...           â”‚ [send] âœ‰ï¸ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Image Preview Widget

### Inline View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                â”‚
â”‚     Image Preview (300px)      â”‚
â”‚     Auto-scaled with rounded   â”‚
â”‚     corners (12px radius)      â”‚
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
sunset.jpg â€¢ 2.5 MB
```

### Fullscreen View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ•  sunset.jpg                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚                                  â”‚
â”‚       [Full Image Display]       â”‚
â”‚       (Pinch to Zoom)            â”‚
â”‚       (Drag to Pan)              â”‚
â”‚                                  â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Video Preview Widget

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚                      â”‚    â”‚
â”‚    â”‚    â–¶  [PLAY]        â”‚    â”‚
â”‚    â”‚    (tap to toggle)   â”‚    â”‚
â”‚    â”‚                      â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚    00:45                        â”‚
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
video.mp4 â€¢ 12.3 MB
```

**States:**
- â¯ï¸ **Playing**: Shows pause icon in overlay
- â¸ï¸ **Paused**: Shows play icon in overlay
- â³ **Loading**: Shows circular progress indicator

---

## Audio Preview Widget

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸµ song.mp3                          â”‚
â”‚                                      â”‚
â”‚ ğŸ”µâ–¶  â”â”â”â”â”â•¤â”â”â”â”â”â”  0:23 / 3:42     â”‚
â”‚     (Draggable slider)               â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Components:**
- ğŸ”µâ–¶ - Play/Pause button (circular, blue)
- â”â”â”â•¤â”â” - Seekable progress slider
- Time display - "Current / Total"

**States:**
- â–¶ï¸ **Stopped**: Play button highlighted
- â¸ï¸ **Playing**: Pause button highlighted
- Slider shows current position

---

## Message Bubble Structure

### Text Message
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Friend's Phone (12px)   â”‚
â”‚                         â”‚
â”‚ Your message text       â”‚
â”‚ can be multiple lines   â”‚
â”‚                         â”‚
â”‚ 14:32    ğŸ“Œ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Image Message
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Friend's Phone (12px)            â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  [Image Preview]           â”‚   â”‚
â”‚ â”‚  Responsive width/height   â”‚   â”‚
â”‚ â”‚  Rounded corners           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â”‚
â”‚ image.jpg â€¢ 2.5 MB               â”‚
â”‚                                  â”‚
â”‚ 14:32                        ğŸ“Œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Video Message
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Friend's Phone (12px)            â”‚
â”‚                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â–¶                          â”‚   â”‚
â”‚ â”‚ [Video Player]             â”‚   â”‚
â”‚ â”‚ 00:45                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â”‚
â”‚ video.mp4 â€¢ 12.3 MB              â”‚
â”‚                                  â”‚
â”‚ 14:35                        ğŸ“Œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Audio Message
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Friend's Phone (12px)            â”‚
â”‚                                  â”‚
â”‚ ğŸµ song.mp3                      â”‚
â”‚                                  â”‚
â”‚ ğŸ”µâ–¶  â”â”â”â”â•¤â”â”â” 2:15 / 3:42       â”‚
â”‚                                  â”‚
â”‚ 14:40                        ğŸ“Œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Color Scheme

### Light Mode
| Element | Color |
|---------|-------|
| **Sender Bubble** | Blue (#2196F3) |
| **Receiver Bubble** | Dark Slate (#2C3E50) |
| **Sender Text** | White |
| **Receiver Text** | White |
| **Play Button** | Blue (#2196F3) |
| **Progress Bar** | Light Blue (#4FC3F7) |
| **Timestamps** | Gray with opacity |

### Dark Mode
| Element | Color |
|---------|-------|
| **Sender Bubble** | Blue (#2196F3) |
| **Receiver Bubble** | Dark Gray (#2C3E50) |
| **Sender Text** | White |
| **Receiver Text** | White |
| **Play Button** | Blue (#2196F3) |
| **Progress Bar** | Light Blue (#4FC3F7) |

---

## User Interactions

### Image
```
Chat View          Fullscreen View
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Tap Image    â†’    Opens fullscreen
              â†’    with zoom controls

Pinch       â†’     Zoom in/out
Drag        â†’     Pan around
Back/Close  â†’     Return to chat
```

### Video
```
Chat View          Video Playing
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Tap Video   â†’    Plays video
Tap Again   â†’    Pauses video
Tap Again   â†’    Resumes video

Watch       â†’    Can watch full video
            â†’    Shows duration at bottom
```

### Audio
```
Chat View              Audio Playing
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Tap â–¶ Button    â†’    Starts playing
Tap â¸ Button    â†’    Pauses playing
Drag Slider     â†’    Seeks to position
                â†’    Shows time display
```

---

## Animation Effects

### Image Preview
- Fade in when loaded
- Rounded corners (12px)
- Shadow on cards

### Video Player
- Play button overlay on tap
- Duration display at bottom
- Smooth fade in/out

### Audio Player
- Smooth slider animation
- Play/Pause button state change
- Time counter updates smoothly

---

## Responsive Design

```
Mobile (Small Screen)        Desktop (Large Screen)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Image: 70% width]  â”‚     â”‚ [Image: 70% max-width] â”‚
â”‚ [Video: 70% width]  â”‚     â”‚ [Video: 70% max-width] â”‚
â”‚ [Audio: 70% width]  â”‚     â”‚ [Audio: 70% max-width] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Max Heights: 300px
Max Widths: 70% of screen width
Min Widths: Auto (content-based)
```

---

## State Management

### Transfer States
```
Sending File
â”œâ”€ Uploading (0-99%)
â”œâ”€ Sent (100%)
â””â”€ Failed (error shown)

Receiving File
â”œâ”€ Downloading (0-99%)
â”œâ”€ Complete (100%)
â””â”€ Failed (error shown)

Playback States
â”œâ”€ Idle (ready to play)
â”œâ”€ Loading (initializing)
â”œâ”€ Playing (media running)
â”œâ”€ Paused (paused by user)
â””â”€ Error (playback failed)
```

---

## Accessibility Features

âœ… Proper contrast ratios
âœ… Touch targets minimum 48x48 dp
âœ… Semantic labels for icons
âœ… Error messages in plain language
âœ… Keyboard navigation support
âœ… Voice player has accessible controls

---

## Performance Considerations

| Component | Optimization |
|-----------|---|
| **Images** | File-based, lazy load |
| **Videos** | Async initialization, proper disposal |
| **Audio** | Efficient streaming with just_audio |
| **Memory** | Proper cleanup in dispose() |
| **UI** | Non-blocking async operations |

